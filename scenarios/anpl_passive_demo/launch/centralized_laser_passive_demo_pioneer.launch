<launch>

  <!-- Parameters and processes on the central machine-->
  <arg name="current_scenario"  default="anpl_interactive_demo_sr" />

  <arg name="scenario_dir"      default="$(eval find(current_scenario))" />
  <arg name="config_files_dir"  default="$(arg scenario_dir)/config_files" />

  <!-- For putting the time back to real time, set this param to false -->
  <rosparam> /use_sim_time : false </rosparam>

  <!-- Load robot params -->
  <group ns="Robot_A">
    <rosparam command="load" file="$(arg config_files_dir)/pioneer_robot_A.yaml" />
  </group>
  <!-- <group ns="Robot_B">
    <rosparam command="load" file="$(arg config_files_dir)/pioneer_robot_B.yaml" />
  </group> -->
  
  <param name="scenario_folder" value="$(arg scenario_dir)"/>

  <node pkg="logger" type="logger" name="logger" clear_params="true" output="screen">
    <rosparam command="load" file="$(arg config_files_dir)/logger.yaml" />

     <!-- Boost archive version used by ROS and Matlab -->
    <rosparam> ros_boost_archive_version: "serialization::archive 12" </rosparam> 
    <!-- ROS Kinetic v12 -->
    <rosparam> matlab_boost_archive_version: "serialization::archive 11" </rosparam> 
    <!-- Matlab 2017b v11 -->
   </node>

  <node pkg="da" type="da_icp_laser" name="da_laser" clear_params="true" output="screen">
    <rosparam command="load" file="$(arg config_files_dir)/da_laser_csm_icp.yaml" />
  </node>

  <node pkg="belief" type="belief_isam2" name="belief_isam2" clear_params="true" output="screen"> <!-- launch-prefix="xterm -e gdb -ex run [MinusMinus]args" -->
    <rosparam command="load" file="$(arg config_files_dir)/belief_isam2.yaml" />
  </node>

  <node pkg="mapper" type="map_laser_node" name="map_octomap_laser" clear_params="true" output="screen">
    <rosparam command="load" file="$(arg config_files_dir)/map_octomap_laser.yaml" />
  </node>

  
    
   <!-- If no map is used don't load anything (for faster rendering) -->
   <arg unless="$(arg use_preloaded_map_in_AG)" name="world_octomap" value=""/>
   <!-- The world map that will be used for action generator in interactive and OMPL mode. This assumes that the environment is known a priori when generating cadidate actions. This map, however, is not used anywhere else, for e.g. in the inference process. More general case would be to use the inferred map instead. This is not crutial for BSP as we can view the process of action generation as independent of the current map estimate. -->
   <arg if="$(arg use_preloaded_map_in_AG)" name="world_octomap" value="$(find action_generator)/worlds/ANPL-Hyundai.ot" />
   <!--arg if="$(arg use_preloaded_map_in_AG)" name="world_octomap" value="$(find action_generator_node)/worlds/ANPL-10.bt" /-->
   
   <arg name="rviz_config" value="$(find action_generator)/config/planning_15Hz_2d.rviz" />
   <!--arg name="rviz_config" value="$(arg config_files_dir)/planning_at_ANPL.rviz" /-->
   

  


  </launch>
